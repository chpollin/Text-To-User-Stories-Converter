<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Forschungstext-Analyse</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Include Chart.js for visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Include Lucide icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- Main Navigation -->
    <nav class="main-navigation">
        <div class="container">
            <div class="nav-content">
                <span class="logo">Forschungstext-Analyse</span>
                <div class="nav-links">
                    <button class="nav-button" onclick="location.href='index.html'">
                        <svg class="icon"><use xlink:href="#home"></use></svg>
                        <span>Start</span>
                    </button>
                    <button class="nav-button" onclick="location.href='search.html'">
                        <svg class="icon"><use xlink:href="#search"></use></svg>
                        <span>Suche</span>
                    </button>
                    <button class="nav-button" onclick="location.href='library.html'">
                        <svg class="icon"><use xlink:href="#book"></use></svg>
                        <span>Bibliothek</span>
                    </button>
                    <button class="nav-button primary" onclick="location.href='settings.html'">
                        <svg class="icon"><use xlink:href="#settings"></use></svg>
                        <span>Einstellungen</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="space-y-6">
            <!-- Input Section -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Historischen Text analysieren</h2>
                    <p class="card-description">Geben Sie Ihren Text ein, um Forschungsaufgaben zu generieren.</p>
                </div>
                <div class="card-content">
                    <!-- API Key Section -->
                    <div class="form-group">
                        <label for="apiKeyInput">OpenAI API-Schlüssel</label>
                        <input 
                            type="password" 
                            id="apiKeyInput" 
                            class="input"
                            placeholder="Geben Sie Ihren OpenAI API-Schlüssel ein"
                        >
                        <button id="toggleApiKey" class="button secondary small">Anzeigen</button>
                        <p class="form-info">
                            Ihr API-Schlüssel wird nur temporär im Speicher Ihres Browsers gespeichert und nie weitergegeben.
                            <br>
                            Holen Sie Ihren API-Schlüssel unter: <a href="https://platform.openai.com/account/api-keys" target="_blank">OpenAI API-Schlüssel</a>
                        </p>
                    </div>

                    <!-- Text Input -->
                    <div class="form-group">
                        <label for="documentInput">Historischer Text</label>
                        <textarea 
                            id="documentInput" 
                            class="input"
                            placeholder="Fügen Sie hier Ihren historischen Text ein..."
                            rows="10"></textarea>
                    </div>

                    <!-- File Input -->
                    <div class="form-group">
                        <label for="fileInput">Textdatei hochladen</label>
                        <input type="file" id="fileInput" accept=".txt">
                        <span id="fileName"></span>
                    </div>

                    <!-- Epic Assignment -->
                    <div class="form-group">
                        <label for="epicInput">Forschungsthema auswählen oder erstellen</label>
                        <input type="text" id="epicInput" class="input" placeholder="Neues Thema eingeben">
                        <select id="epicSelect" class="input">
                            <option value="">-- Wählen Sie ein bestehendes Thema --</option>
                        </select>
                        <button id="addEpicButton" class="button secondary small">Thema hinzufügen/auswählen</button>
                    </div>

                    <!-- Action Buttons -->
                    <div class="form-group">
                        <button id="processButton" class="button primary">Forschungsaufgaben generieren</button>
                        <button id="clearButton" class="button secondary">Eingabe löschen</button>
                    </div>
                </div>
            </div>

            <!-- Output Section -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Generierte Forschungsaufgaben</h2>
                </div>
                <div class="card-content">
                    <div id="userStoriesOutput" class="output-box"></div>
                    <div class="form-group">
                        <button id="copyButton" class="button secondary">Aufgaben kopieren</button>
                        <button id="exportButton" class="button secondary">Aufgaben herunterladen (TXT)</button>
                        <button id="exportJSONButton" class="button secondary">Aufgaben als JSON exportieren</button>
                    </div>
                </div>
            </div>

            <!-- Loading Spinner -->
            <div id="loadingSpinner" class="spinner hidden"></div>

            <!-- Visualization Section -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Forschungsthemen Visualisierung</h2>
                </div>
                <div class="card-content">
                    <canvas id="epicChart"></canvas>
                </div>
            </div>

            <!-- Navigation to Dashboard -->
            <div class="navigation">
                <a href="dashboard.html" class="button primary">Zum Dashboard</a>
            </div>
        </div>
    </div>

    <!-- Lucide Icons -->
    <svg style="display: none;">
        <symbol id="home" viewBox="0 0 24 24">
            <path d="M3 9.857l9-6 9 6V21H3V9.857z"/>
        </symbol>
        <symbol id="search" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </symbol>
        <symbol id="book" viewBox="0 0 24 24">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
            <path d="M4 4v13.5"/>
            <path d="M20 4v13.5"/>
            <path d="M6.5 17A2.5 2.5 0 0 1 4 19.5"/>
        </symbol>
        <symbol id="settings" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a1.65 1.65 0 0 1-2.34 2.34l-.06-.06a1.65 1.65 0 0 0-1.82-.33"/>
            <path d="M4.6 9a1.65 1.65 0 0 1 .33-1.82l.06-.06a1.65 1.65 0 1 1 2.34 2.34l-.06.06A1.65 1.65 0 0 0 4.6 9z"/>
            <path d="M12 2v2"/>
            <path d="M12 20v2"/>
            <path d="M4.93 4.93l1.41 1.41"/>
            <path d="M17.66 17.66l1.41 1.41"/>
            <path d="M2 12h2"/>
            <path d="M20 12h2"/>
            <path d="M4.93 19.07l1.41-1.41"/>
            <path d="M17.66 6.34l1.41-1.41"/>
        </symbol>
    </svg>

    <script src="app.js"></script>
</body>
</html>
